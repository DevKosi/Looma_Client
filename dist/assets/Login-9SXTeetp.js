import{r as o,u as j,j as e,L as F}from"./index-DatZN8-u.js";import{s as N,a as g,d as v,b as E,g as C,c as S}from"./firebaseConfig-DFE2fxb7.js";import{F as k,a as A,b as P,c as B}from"./index-EHIN2_jU.js";import{m as i}from"./proxy-MyAIwVy1.js";function W(){const[a,m]=o.useState({email:"",password:""}),[u,s]=o.useState(""),[n,x]=o.useState(!1),[f,y]=o.useState(!1),l=j(),p=r=>{const{name:t,value:c}=r.target;m(d=>({...d,[t]:c}))},w=async r=>{r.preventDefault(),s(""),x(!0);try{const c=(await N(g,a.email,a.password)).user.uid,d=v(E,"users",c),h=await C(d);if(!h.exists()){s("Account not properly configured. Contact support.");return}switch(h.data().role){case"student":l("/student-dashboard");break;case"admin":l("/admin-dashboard");break;case"superadmin":l("/superadmin-dashboard");break;default:s("Invalid role assigned. Contact support.")}m({email:"",password:""})}catch(t){console.error(t),s(t.code==="auth/wrong-password"?"Incorrect password":t.code==="auth/user-not-found"?"No account found with this email":"Login failed. Please try again.")}finally{x(!1)}},b=async()=>{if(!a.email){s("Please enter your email to reset password");return}try{await S(g,a.email),y(!0),s("")}catch(r){console.error(r),s("Failed to send reset email. Please try again.")}};return e.jsx(i.div,{initial:{opacity:0},animate:{opacity:1},className:"min-h-screen bg-[#F8FAFC] flex items-center justify-center p-4",children:e.jsxs(i.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1},className:"bg-white rounded-xl shadow-lg overflow-hidden w-full max-w-md",children:[e.jsxs("div",{className:"bg-[#6366F1] p-6 text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Welcome Back"}),e.jsx("p",{className:"text-[#E2E8F0] mt-1",children:"Sign in to your account"})]}),e.jsxs("div",{className:"px-6 pt-4",children:[u&&e.jsxs(i.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-[#F43F5E]/10 text-[#F43F5E] p-3 rounded-lg mb-4 text-sm flex items-center",children:[e.jsx(k,{className:"mr-2"})," ",u]}),f&&e.jsx(i.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-[#10B981]/10 text-[#10B981] p-3 rounded-lg mb-4 text-sm",children:"Password reset link sent to your email"})]}),e.jsxs("form",{onSubmit:w,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"text-[#1E293B] text-sm font-medium flex items-center",children:[e.jsx(A,{className:"mr-2"})," Email Address"]}),e.jsx("input",{type:"email",name:"email",value:a.email,onChange:p,required:!0,className:"w-full p-3 border border-[#E2E8F0] rounded-lg focus:ring-2 focus:ring-[#6366F1] focus:border-transparent",placeholder:"your@email.com"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"text-[#1E293B] text-sm font-medium flex items-center",children:[e.jsx(P,{className:"mr-2"})," Password"]}),e.jsx("input",{type:"password",name:"password",value:a.password,onChange:p,required:!0,className:"w-full p-3 border border-[#E2E8F0] rounded-lg focus:ring-2 focus:ring-[#6366F1] focus:border-transparent",placeholder:"Enter your password"})]}),e.jsx(i.button,{type:"submit",disabled:n,whileHover:{scale:1.02},whileTap:{scale:.98},className:`w-full py-3 px-4 rounded-lg font-semibold text-white ${n?"bg-[#6366F1]/80":"bg-[#6366F1] hover:bg-[#6366F1]/90"} transition-colors flex items-center justify-center`,children:n?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-5 w-5 mr-2 text-white",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing In..."]}):e.jsxs(e.Fragment,{children:["Continue ",e.jsx(B,{className:"ml-2"})]})})]}),e.jsxs("div",{className:"px-6 pb-6 flex flex-col sm:flex-row justify-between items-center gap-2",children:[e.jsx("button",{onClick:b,className:"text-[#6366F1] hover:text-[#0EA5E9] text-sm font-medium transition-colors",children:"Forgot password?"}),e.jsxs("div",{className:"text-[#64748B] text-sm",children:["Don't have an account?"," ",e.jsx(F,{to:"/register",className:"text-[#6366F1] hover:underline font-medium",children:"Sign up"})]})]})]})})}export{W as default};
