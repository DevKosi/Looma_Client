import{r as u,u as ze,j as e,R as Se}from"./index-k15JMTVp.js";import{i as N,h as p,b as d,q as te,o as Ae,m as ke,w as De,n as ie,u as pe,d as O,j as ae,p as Ce,r as Le,a as ne,g as Ue,l as Te}from"./firebaseConfig-DFE2fxb7.js";import{x as Ee,g as qe,y as X,z as $e,h as ce,q as oe,A as de,B as Z,C as Y,D as me,e as ee,E as Fe,G as Re,k as Oe,H as xe,v as ue,I as se,w as he,J as Qe,K as _e,L as Me}from"./index-CBugXPmh.js";import{A as Pe}from"./index-DhrJfXwy.js";import{m as ge}from"./proxy-B-YSyxNx.js";const z={LAST_HOUR:"last_hour",LAST_24_HOURS:"last_24_hours",LAST_WEEK:"last_week",LAST_MONTH:"last_month",ALL_TIME:"all_time"},R={EXCELLENT:{score:95,color:"green",label:"Excellent"},GOOD:{score:80,color:"blue",label:"Good"},FAIR:{score:65,color:"yellow",label:"Fair"},POOR:{score:50,color:"orange",label:"Poor"},CRITICAL:{score:0,color:"red",label:"Critical"}},Be=async(l=z.ALL_TIME)=>{try{console.log("🔍 Fetching platform statistics...");const c=new Date;let r=null;switch(l){case z.LAST_HOUR:r=new Date(c.getTime()-60*60*1e3);break;case z.LAST_24_HOURS:r=new Date(c.getTime()-24*60*60*1e3);break;case z.LAST_WEEK:r=new Date(c.getTime()-7*24*60*60*1e3);break;case z.LAST_MONTH:r=new Date(c.getTime()-30*24*60*60*1e3);break}const[h,o]=await Promise.all([N(p(d,"users")),N(p(d,"quizzes"))]),a=h.docs.map(n=>({id:n.id,...n.data()})),t={students:a.filter(n=>n.role==="student"||!n.role),admins:a.filter(n=>n.role==="admin"),superAdmins:a.filter(n=>n.role==="superadmin")},b={};a.forEach(n=>{n.department&&(b[n.department]=(b[n.department]||0)+1)});const m=o.docs.map(n=>({id:n.id,...n.data()})),g={approved:m.filter(n=>n.status==="approved"),pending:m.filter(n=>n.status==="pending"),draft:m.filter(n=>n.status==="draft")},w={};m.forEach(n=>{n.department&&(w[n.department]=(w[n.department]||0)+1)});let y=0,x=0;const F={},S={},Q=m.map(async n=>{const C=te(p(d,"quizzes",n.id,"submissions")),T=await N(C);if(S[n.id]={quizTitle:n.title,department:n.department,count:T.size,submissions:T.docs.map(E=>({id:E.id,...E.data()}))},y+=T.size,r){const E=T.docs.filter(W=>(W.data().submittedAt?.toDate?.()||new Date(W.data().submittedAt))>=r).length;x+=E}n.department&&(F[n.department]=(F[n.department]||0)+T.size)});await Promise.all(Q);const k=m.length>0?y/m.length:0,M=t.students.length>0?y/t.students.length:0,L={userEngagement:Math.min(M/5*100,100),quizQuality:g.approved.length/Math.max(m.length,1)*100,systemActivity:Math.min(x/Math.max(y*.1,1)*100,100),platformGrowth:Math.min(t.students.length/50*100,100)},U=Object.values(L).reduce((n,C)=>n+C,0)/Object.keys(L).length;let j=R.CRITICAL;U>=95?j=R.EXCELLENT:U>=80?j=R.GOOD:U>=65?j=R.FAIR:U>=50&&(j=R.POOR);const P={users:{total:a.length,byRole:t,byDepartment:b,recentSignups:r?a.filter(n=>(n.createdAt?.toDate?.()||new Date(n.createdAt))>=r).length:null},quizzes:{total:m.length,byStatus:g,byDepartment:w,recentCreated:r?m.filter(n=>(n.createdAt?.toDate?.()||new Date(n.createdAt))>=r).length:null},submissions:{total:y,recent:x,byDepartment:F,byQuiz:S,averagePerQuiz:Math.round(k*100)/100,averagePerUser:Math.round(M*100)/100},health:{score:Math.round(U),status:j,factors:L},timeFrame:l,generatedAt:new Date};return console.log("✅ Platform statistics generated successfully"),P}catch(c){return console.error("❌ Error fetching platform stats:",c),{error:c.message,users:{total:0,byRole:{},byDepartment:{}},quizzes:{total:0,byStatus:{},byDepartment:{}},submissions:{total:0,recent:0,byDepartment:{},byQuiz:{}},health:{score:0,status:R.CRITICAL,factors:{}},timeFrame:l,generatedAt:new Date}}},He=async(l=100)=>{try{console.log("📝 Fetching user activity logs...");const c=await N(p(d,"quizzes")),r=[],h=c.docs.map(async a=>{const t=te(p(d,"quizzes",a.id,"submissions"),Ae("submittedAt","desc"),ke(20));(await N(t)).docs.forEach(m=>{const g=m.data();r.push({id:m.id,type:"quiz_submission",action:"Quiz Completed",user:{id:g.userId,name:g.fullName||"Unknown",regNumber:g.regNumber||"Anonymous",department:g.department||"Unknown"},quiz:{id:a.id,title:a.data().title,department:a.data().department},details:{score:g.score,total:g.total,percentage:g.percentage,timeSpent:g.timeSpent},timestamp:g.submittedAt?.toDate?.()||new Date(g.submittedAt||Date.now()),severity:"info",icon:"📝"})})});await Promise.all(h),r.sort((a,t)=>t.timestamp-a.timestamp);const o=r.slice(0,l);return console.log(`📋 Retrieved ${o.length} activity logs`),o}catch(c){return console.error("❌ Error fetching activity logs:",c),[]}},Ie=async()=>{try{console.log("🚨 Checking for system alerts...");const l=[],c=new Date,r=te(p(d,"quizzes"),De("status","==","pending")),h=await N(r);h.size>0&&l.push({id:"pending_quizzes",type:"warning",title:"Quizzes Pending Approval",message:`${h.size} quiz(es) are waiting for approval`,count:h.size,action:"Review pending quizzes",severity:"medium",timestamp:c,icon:"⏳"});const o=await N(p(d,"users")),a={},t=new Date(c.getTime()-24*60*60*1e3);o.docs.forEach(y=>{const x=y.data();x.department&&(a[x.department]||(a[x.department]={users:0,recentActivity:!1}),a[x.department].users++,x.lastLogin?.toDate?.()>=t&&(a[x.department].recentActivity=!0))}),Object.entries(a).forEach(([y,x])=>{x.users>=5&&!x.recentActivity&&l.push({id:`inactive_dept_${y}`,type:"warning",title:"Inactive Department",message:`${y} department shows no recent activity`,department:y,action:"Check department engagement",severity:"low",timestamp:c,icon:"😴"})});const b=await N(p(d,"quizzes")),m=[],g=b.docs.map(async y=>{const x=y.data();if(x.status==="approved"){const S=(await N(p(d,"quizzes",y.id,"submissions"))).size,Q=x.createdAt?.toDate?.()||new Date(x.createdAt),k=new Date(c.getTime()-7*24*60*60*1e3);Q<k&&S<5&&m.push({title:x.title,department:x.department,submissions:S})}});await Promise.all(g),m.length>0&&l.push({id:"low_engagement",type:"info",title:"Low Quiz Engagement",message:`${m.length} approved quiz(es) have low participation`,count:m.length,details:m,action:"Review quiz engagement strategies",severity:"low",timestamp:c,icon:"📉"});const w={high:3,medium:2,low:1};return l.sort((y,x)=>(w[x.severity]||0)-(w[y.severity]||0)),console.log(`🚨 Found ${l.length} system alerts`),l}catch(l){return console.error("❌ Error fetching system alerts:",l),[]}},Ge=async()=>{try{console.log("🏢 Fetching department analytics...");const[l,c]=await Promise.all([N(p(d,"users")),N(p(d,"quizzes"))]),r={};l.docs.forEach(o=>{const a=o.data();if(a.department&&(r[a.department]||(r[a.department]={name:a.department,users:{total:0,students:0,admins:0},quizzes:{total:0,approved:0,pending:0,draft:0},submissions:{total:0,averageScore:0},lastActivity:null}),r[a.department].users.total++,a.role==="admin"?r[a.department].users.admins++:r[a.department].users.students++,a.lastLogin?.toDate?.())){const t=a.lastLogin.toDate();(!r[a.department].lastActivity||t>r[a.department].lastActivity)&&(r[a.department].lastActivity=t)}});const h=c.docs.map(async o=>{const a=o.data();if(a.department&&r[a.department]){r[a.department].quizzes.total++,r[a.department].quizzes[a.status]++;const t=await N(p(d,"quizzes",o.id,"submissions"));r[a.department].submissions.total+=t.size;let b=0,m=0;if(t.docs.forEach(g=>{const w=g.data();typeof w.percentage=="number"&&(b+=w.percentage,m++)}),m>0){const g=b/m;r[a.department].submissions.averageScore=(r[a.department].submissions.averageScore+g)/2}}});return await Promise.all(h),Object.values(r).forEach(o=>{const a={userBase:Math.min(o.users.total/20*100,100),quizActivity:Math.min(o.quizzes.total/10*100,100),engagement:Math.min(o.submissions.total/50*100,100),performance:o.submissions.averageScore||0};o.healthScore=Object.values(a).reduce((t,b)=>t+b,0)/Object.keys(a).length,o.healthFactors=a}),console.log(`🏢 Department analytics for ${Object.keys(r).length} departments`),Object.values(r)}catch(l){return console.error("❌ Error fetching department analytics:",l),[]}},Ve=async()=>{try{console.log("💾 Creating system backup...");const l={version:"1.0",timestamp:new Date().toISOString(),collections:{}},c=await N(p(d,"users"));l.collections.users=c.docs.map(h=>({id:h.id,...h.data()}));const r=await N(p(d,"quizzes"));l.collections.quizzes=[];for(const h of r.docs){const o={id:h.id,...h.data(),submissions:[],codes:[]},a=await N(p(d,"quizzes",h.id,"submissions"));o.submissions=a.docs.map(b=>({id:b.id,...b.data()}));const t=await N(p(d,"quizzes",h.id,"codes"));o.codes=t.docs.map(b=>({id:b.id,...b.data()})),l.collections.quizzes.push(o)}return l.metadata={totalUsers:l.collections.users.length,totalQuizzes:l.collections.quizzes.length,totalSubmissions:l.collections.quizzes.reduce((h,o)=>h+o.submissions.length,0),backupSize:JSON.stringify(l).length},console.log("✅ System backup created successfully"),console.log(`📊 Backup contains: ${l.metadata.totalUsers} users, ${l.metadata.totalQuizzes} quizzes, ${l.metadata.totalSubmissions} submissions`),l}catch(l){throw console.error("❌ Error creating system backup:",l),new Error(`Backup failed: ${l.message}`)}},We=l=>{const c=[];try{const r=ie(p(d,"users"),o=>{console.log("👥 Users collection updated"),l({type:"users_updated",count:o.size})}),h=ie(p(d,"quizzes"),o=>{console.log("📚 Quizzes collection updated"),l({type:"quizzes_updated",count:o.size})});return c.push(r,h),()=>{c.forEach(o=>o()),console.log("🔌 Real-time listeners cleaned up")}}catch(r){return console.error("❌ Error setting up real-time updates:",r),()=>{}}},Je=async(l,c)=>{try{return await pe(O(d,"users",l),{role:c,updatedAt:ae()}),console.log(`✅ User ${l} role updated to ${c}`),!0}catch(r){throw console.error("❌ Error updating user role:",r),r}},Ke=async l=>{try{return await Ce(O(d,"users",l)),console.log(`✅ User ${l} deleted`),!0}catch(c){throw console.error("❌ Error deleting user:",c),c}},Xe=async(l,c)=>{try{return await pe(O(d,"quizzes",l),{status:c,updatedAt:ae()}),console.log(`✅ Quiz ${l} status updated to ${c}`),!0}catch(r){throw console.error("❌ Error updating quiz status:",r),r}},Ze=async l=>{try{return await Le(d,async c=>{c.delete(O(d,"quizzes",l))}),console.log(`✅ Quiz ${l} deleted globally`),!0}catch(c){throw console.error("❌ Error deleting quiz globally:",c),c}};function rs(){const[l,c]=u.useState(null),[r,h]=u.useState("overview"),[o,a]=u.useState({admin:!0,stats:!1,logs:!1,alerts:!1,departments:!1,backup:!1}),[t,b]=u.useState(null),[m,g]=u.useState([]),[w,y]=u.useState([]),[x,F]=u.useState([]),[S,Q]=u.useState([]),[k,M]=u.useState([]),[L,U]=u.useState(z.LAST_24_HOURS),[j,P]=u.useState(!1),[n,C]=u.useState(null),[T,E]=u.useState(new Date),[W,re]=u.useState(null),[B,H]=u.useState(null),[I,G]=u.useState(""),q=ze();u.useEffect(()=>{(async()=>{try{const i=ne.currentUser;if(!i){q("/login");return}const v=await Ue(O(d,"users",i.uid));if(!v.exists()||v.data().role!=="superadmin"){q("/login");return}c({uid:i.uid,...v.data()})}catch(i){console.error("Error checking super admin access:",i),q("/login")}finally{a(i=>({...i,admin:!1}))}})()},[q]);const $=u.useCallback(async()=>{a(s=>({...s,stats:!0}));try{const s=await Be(L);b(s),console.log("📊 Platform stats loaded:",s)}catch{f("Failed to load platform statistics","error")}finally{a(s=>({...s,stats:!1}))}},[L]),V=u.useCallback(async()=>{a(s=>({...s,logs:!0}));try{const s=await He(50);g(s)}catch{f("Failed to load activity logs","error")}finally{a(s=>({...s,logs:!1}))}},[]),J=u.useCallback(async()=>{a(s=>({...s,alerts:!0}));try{const s=await Ie();y(s)}catch{f("Failed to load system alerts","error")}finally{a(s=>({...s,alerts:!1}))}},[]),K=u.useCallback(async()=>{a(s=>({...s,departments:!0}));try{const s=await Ge();F(s)}catch{f("Failed to load department analytics","error")}finally{a(s=>({...s,departments:!1}))}},[]),A=u.useCallback(async()=>{try{const[s,i]=await Promise.all([N(p(d,"users")),N(p(d,"quizzes"))]),v=s.docs.map(_=>({id:_.id,..._.data()})),D=i.docs.map(_=>({id:_.id,..._.data()}));Q(v),M(D)}catch{f("Failed to load users and quizzes","error")}},[]);u.useEffect(()=>{l&&($(),V(),J(),K(),A())},[l,$,V,J,K,A]),u.useEffect(()=>j?We(i=>{console.log("🔴 Real-time update:",i),E(new Date),i.type==="users_updated"?A():i.type==="quizzes_updated"&&(A(),$())}):void 0,[j,A,$]);const f=(s,i="success")=>{C({message:s,type:i}),setTimeout(()=>C(null),5e3)},be=async()=>{a(s=>({...s,backup:!0}));try{const s=await Ve(),i=new Blob([JSON.stringify(s,null,2)],{type:"application/json"}),v=URL.createObjectURL(i),D=document.createElement("a");D.href=v,D.download=`looma-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(D),D.click(),document.body.removeChild(D),URL.revokeObjectURL(v),f("System backup created and downloaded successfully!")}catch(s){f(`Backup failed: ${s.message}`,"error")}finally{a(s=>({...s,backup:!1}))}},ye=async(s,i)=>{try{await Je(s,i),f(`User role updated to ${i}`),A()}catch(v){f(`Failed to update user role: ${v.message}`,"error")}},je=async s=>{if(window.confirm("Are you sure you want to delete this user? This action cannot be undone."))try{await Ke(s),f("User deleted successfully"),A()}catch(i){f(`Failed to delete user: ${i.message}`,"error")}},fe=async(s,i)=>{try{await Xe(s,i),f(`Quiz status updated to ${i}`),A(),$()}catch(v){f(`Failed to update quiz status: ${v.message}`,"error")}},Ne=async s=>{if(window.confirm("Are you sure you want to delete this quiz globally? This will remove all associated data."))try{await Ze(s),f("Quiz deleted successfully"),A(),$()}catch(i){f(`Failed to delete quiz: ${i.message}`,"error")}},ve=async()=>{if(!(!B||!I.trim())){a(s=>({...s,backup:!0}));try{const s=I.split(/\s+/).filter(v=>v.trim().length>0),i=Te(d);s.forEach(v=>{const D=O(p(d,"quizzes",B,"codes"),v);i.set(D,{code:v,used:!1,usedBy:null,createdAt:ae()})}),await i.commit(),f(`${s.length} codes uploaded successfully to quiz!`),G(""),H(null)}catch{f("Failed to upload codes","error")}finally{a(s=>({...s,backup:!1}))}}},we=async()=>{await ne.signOut(),q("/login")},le=async()=>{await Promise.all([$(),V(),J(),K(),A()]),E(new Date),f("All data refreshed successfully")};return o.admin?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Verifying SuperAdmin access..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-40",children:e.jsx("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 py-3 sm:py-4",children:e.jsxs("div",{className:"flex flex-col gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("h1",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900 flex items-center gap-2 sm:gap-3",children:[e.jsx(Ee,{className:"text-red-600 flex-shrink-0",size:20}),e.jsx("span",{className:"truncate",children:"SuperAdmin Dashboard"})]}),e.jsx("p",{className:"text-xs sm:text-sm lg:text-base text-gray-600 mt-1",children:"Global platform management and analytics"})]}),e.jsxs("button",{onClick:we,className:"flex items-center gap-2 text-red-600 hover:text-red-700 text-sm font-medium px-3 py-2 rounded-lg hover:bg-red-50 transition-colors ml-2",children:[e.jsx(qe,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>P(!j),className:`flex items-center gap-2 px-3 py-2 rounded-lg text-xs sm:text-sm font-medium transition-colors ${j?"bg-green-100 text-green-800 hover:bg-green-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${j?"bg-green-500 animate-pulse":"bg-gray-400"}`}),j?"Live":"Offline"]}),e.jsxs("button",{onClick:le,className:"flex items-center gap-2 px-3 py-2 bg-blue-100 text-blue-800 rounded-lg hover:bg-blue-200 text-xs sm:text-sm font-medium",children:[e.jsx(X,{size:14}),e.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]})]}),e.jsxs("span",{className:"text-xs sm:text-sm text-gray-500",children:["Updated: ",T.toLocaleTimeString()]})]})]})})}),e.jsx(Pe,{children:n&&e.jsx(ge.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"fixed top-20 right-4 z-50",children:e.jsx("div",{className:`p-4 rounded-lg shadow-lg ${n.type==="error"?"bg-red-50 text-red-700 border border-red-200":"bg-green-50 text-green-700 border border-green-200"}`,children:n.message})})}),e.jsx("nav",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-3 sm:px-4",children:e.jsx("div",{className:"flex overflow-x-auto scrollbar-hide",children:[{id:"overview",label:"Overview",icon:e.jsx($e,{})},{id:"analytics",label:"Analytics",icon:e.jsx(ce,{})},{id:"users",label:"Users",icon:e.jsx(oe,{})},{id:"quizzes",label:"Quizzes",icon:e.jsx(de,{})},{id:"departments",label:"Departments",icon:e.jsx(Z,{})},{id:"logs",label:"Logs",icon:e.jsx(Y,{})},{id:"maintenance",label:"Maintenance",icon:e.jsx(me,{})},{id:"leaderboard",label:"Leaderboard",icon:e.jsx(ee,{})}].map(s=>e.jsxs("button",{onClick:()=>h(s.id),className:`px-3 sm:px-4 py-3 font-medium text-xs sm:text-sm flex items-center gap-1 sm:gap-2 whitespace-nowrap border-b-2 transition-colors ${r===s.id?"text-blue-600 border-blue-600":"text-gray-500 hover:text-gray-700 border-transparent"}`,children:[Se.cloneElement(s.icon,{size:14}),e.jsx("span",{className:"hidden xs:inline sm:inline",children:s.label})]},s.id))})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 py-4 sm:py-6",children:[r==="overview"&&e.jsxs("div",{className:"space-y-6",children:[t&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(Fe,{className:"text-red-500"}),"System Health"]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("select",{value:L,onChange:s=>U(s.target.value),className:"border border-gray-300 rounded-md px-3 py-1 text-sm",children:[e.jsx("option",{value:z.LAST_HOUR,children:"Last Hour"}),e.jsx("option",{value:z.LAST_24_HOURS,children:"Last 24 Hours"}),e.jsx("option",{value:z.LAST_WEEK,children:"Last Week"}),e.jsx("option",{value:z.LAST_MONTH,children:"Last Month"}),e.jsx("option",{value:z.ALL_TIME,children:"All Time"})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 mb-4 sm:mb-6",children:[e.jsxs("div",{className:"text-center bg-white rounded-lg p-3 sm:p-4 shadow-sm",children:[e.jsxs("div",{className:`text-2xl sm:text-3xl lg:text-4xl font-bold mb-1 sm:mb-2 ${t.health.status.color==="green"?"text-green-600":t.health.status.color==="blue"?"text-blue-600":t.health.status.color==="yellow"?"text-yellow-600":t.health.status.color==="orange"?"text-orange-600":"text-red-600"}`,children:[t.health.score,"%"]}),e.jsx("div",{className:"text-xs sm:text-sm text-gray-600",children:"Overall Health"})]}),e.jsxs("div",{className:"text-center bg-white rounded-lg p-3 sm:p-4 shadow-sm",children:[e.jsx("div",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-blue-600 mb-1 sm:mb-2",children:t.users.total}),e.jsx("div",{className:"text-xs sm:text-sm text-gray-600",children:"Total Users"})]}),e.jsxs("div",{className:"text-center bg-white rounded-lg p-3 sm:p-4 shadow-sm",children:[e.jsx("div",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-green-600 mb-1 sm:mb-2",children:t.quizzes.total}),e.jsx("div",{className:"text-xs sm:text-sm text-gray-600",children:"Total Quizzes"})]}),e.jsxs("div",{className:"text-center bg-white rounded-lg p-3 sm:p-4 shadow-sm",children:[e.jsx("div",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-purple-600 mb-1 sm:mb-2",children:t.submissions.total}),e.jsx("div",{className:"text-xs sm:text-sm text-gray-600",children:"Total Submissions"})]})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:Object.entries(t.health.factors).map(([s,i])=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 capitalize",children:s.replace(/([A-Z])/g," $1").trim()}),e.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[Math.round(i),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${i>=80?"bg-green-500":i>=60?"bg-blue-500":i>=40?"bg-yellow-500":i>=20?"bg-orange-500":"bg-red-500"}`,style:{width:`${Math.min(i,100)}%`}})})]},s))})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(Re,{className:"text-yellow-500"}),"System Alerts (",w.length,")"]}),w.length>0?e.jsx("div",{className:"space-y-3",children:w.slice(0,5).map(s=>e.jsx("div",{className:`p-3 rounded-lg border-l-4 ${s.severity==="high"?"bg-red-50 border-red-500":s.severity==="medium"?"bg-yellow-50 border-yellow-500":"bg-blue-50 border-blue-500"}`,children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-gray-900 flex items-center gap-2",children:[e.jsx("span",{children:s.icon}),s.title]}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:s.message})]}),e.jsx("span",{className:"text-xs text-gray-500",children:s.timestamp.toLocaleTimeString()})]})},s.id))}):e.jsxs("div",{className:"text-center text-gray-500 py-4",children:[e.jsx(Oe,{className:"mx-auto text-4xl mb-2 text-green-500"}),e.jsx("p",{children:"No system alerts - everything is running smoothly!"})]})]}),t&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"User Distribution"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Students"}),e.jsx("span",{className:"font-semibold",children:t.users.byRole.students?.length||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Admins"}),e.jsx("span",{className:"font-semibold",children:t.users.byRole.admins?.length||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"SuperAdmins"}),e.jsx("span",{className:"font-semibold",children:t.users.byRole.superAdmins?.length||0})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Quiz Status"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Approved"}),e.jsx("span",{className:"font-semibold text-green-600",children:t.quizzes.byStatus.approved?.length||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Pending"}),e.jsx("span",{className:"font-semibold text-yellow-600",children:t.quizzes.byStatus.pending?.length||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Draft"}),e.jsx("span",{className:"font-semibold text-gray-600",children:t.quizzes.byStatus.draft?.length||0})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Activity Metrics"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Avg per Quiz"}),e.jsx("span",{className:"font-semibold",children:t.submissions.averagePerQuiz})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Avg per User"}),e.jsx("span",{className:"font-semibold",children:t.submissions.averagePerUser})]}),t.submissions.recent!==null&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Recent Activity"}),e.jsx("span",{className:"font-semibold text-blue-600",children:t.submissions.recent})]})]})]})]})]}),r==="analytics"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-6",children:"Platform Analytics"}),t?e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-800 mb-4",children:"Users by Department"}),e.jsx("div",{className:"space-y-3",children:Object.entries(t.users.byDepartment).map(([s,i])=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:s}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${i/t.users.total*100}%`}})}),e.jsx("span",{className:"font-semibold w-8 text-right",children:i})]})]},s))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-800 mb-4",children:"Quizzes by Department"}),e.jsx("div",{className:"space-y-3",children:Object.entries(t.quizzes.byDepartment).map(([s,i])=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:s}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:`${i/t.quizzes.total*100}%`}})}),e.jsx("span",{className:"font-semibold w-8 text-right",children:i})]})]},s))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-800 mb-4",children:"Submissions by Department"}),e.jsx("div",{className:"space-y-3",children:Object.entries(t.submissions.byDepartment).map(([s,i])=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:s}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-purple-500 h-2 rounded-full transition-all duration-300",style:{width:`${i/t.submissions.total*100}%`}})}),e.jsx("span",{className:"font-semibold w-8 text-right",children:i})]})]},s))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-800 mb-4",children:"System Performance"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"p-4 bg-gradient-to-r from-green-50 to-blue-50 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-700",children:"System Health"}),e.jsx("span",{className:`font-bold ${t.health.status.color==="green"?"text-green-600":t.health.status.color==="blue"?"text-blue-600":t.health.status.color==="yellow"?"text-yellow-600":t.health.status.color==="orange"?"text-orange-600":"text-red-600"}`,children:t.health.status.label})]}),e.jsx("div",{className:"mt-2",children:e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:`h-3 rounded-full transition-all duration-500 ${t.health.status.color==="green"?"bg-green-500":t.health.status.color==="blue"?"bg-blue-500":t.health.status.color==="yellow"?"bg-yellow-500":t.health.status.color==="orange"?"bg-orange-500":"bg-red-500"}`,style:{width:`${t.health.score}%`}})})})]})})]})]}):e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})})]})}),r==="leaderboard"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(ee,{className:"text-yellow-500"}),"Global Leaderboard Management"]}),e.jsx("button",{onClick:()=>q("/leaderboard"),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:"View Full Leaderboard"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-4 bg-gradient-to-r from-yellow-50 to-orange-50 rounded-lg border border-yellow-200",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Top Performers"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:"View Rankings"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Monitor student performance across all departments"})]}),e.jsxs("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg border border-blue-200",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Competition Stats"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:"Real-time"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Track competitive engagement metrics"})]}),e.jsxs("div",{className:"p-4 bg-gradient-to-r from-green-50 to-teal-50 rounded-lg border border-green-200",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Achievement System"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:"Active"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Streaks, points, and performance tracking"})]})]}),e.jsx("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:e.jsxs("p",{className:"text-center text-gray-600",children:["🏆 Advanced leaderboard features include departmental rankings, global competition, streak tracking, and performance analytics.",e.jsx("br",{}),e.jsx("span",{className:"text-sm text-gray-500",children:'Click "View Full Leaderboard" to access the complete ranking system.'})]})})]})}),r==="users"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(oe,{className:"text-blue-500"}),"User Management (",S.length," users)"]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Joined"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S.slice(0,20).map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.fullName||"N/A"}),e.jsx("div",{className:"text-sm text-gray-500",children:s.email}),e.jsx("div",{className:"text-xs text-gray-400",children:s.regNumber||"No reg number"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.department||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("select",{value:s.role||"student",onChange:i=>ye(s.id,i.target.value),className:"text-sm border border-gray-300 rounded px-2 py-1",children:[e.jsx("option",{value:"student",children:"Student"}),e.jsx("option",{value:"admin",children:"Admin"}),e.jsx("option",{value:"superadmin",children:"SuperAdmin"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.createdAt?.toDate?.()?.toLocaleDateString()||"Unknown"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>re(s),className:"text-blue-600 hover:text-blue-900 p-1",title:"View Details",children:e.jsx(xe,{size:16})}),e.jsx("button",{onClick:()=>je(s.id),className:"text-red-600 hover:text-red-900 p-1",title:"Delete User",children:e.jsx(ue,{size:16})})]})})]},s.id))})]})}),S.length>20&&e.jsxs("div",{className:"p-4 text-center text-gray-500 border-t",children:["Showing first 20 of ",S.length," users"]})]})}),r==="quizzes"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(de,{className:"text-green-500"}),"Quiz Management (",k.length," quizzes)"]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quiz"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:k.slice(0,20).map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.title}),e.jsxs("div",{className:"text-sm text-gray-500",children:[s.description?.substring(0,60),"..."]}),e.jsxs("div",{className:"text-xs text-gray-400",children:[s.questions?.length||0," questions"]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.department}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("select",{value:s.status,onChange:i=>fe(s.id,i.target.value),className:`text-sm border rounded px-2 py-1 ${s.status==="approved"?"border-green-300 bg-green-50":s.status==="pending"?"border-yellow-300 bg-yellow-50":"border-gray-300 bg-gray-50"}`,children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.createdAt?.toDate?.()?.toLocaleDateString()||"Unknown"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>{H(s.id),G("")},className:"text-green-600 hover:text-green-900 p-1",title:"Upload Codes",children:e.jsx(se,{size:16})}),e.jsx("button",{onClick:()=>H(s),className:"text-blue-600 hover:text-blue-900 p-1",title:"View Details",children:e.jsx(xe,{size:16})}),e.jsx("button",{onClick:()=>Ne(s.id),className:"text-red-600 hover:text-red-900 p-1",title:"Delete Quiz",children:e.jsx(ue,{size:16})})]})})]},s.id))})]})}),k.length>20&&e.jsxs("div",{className:"p-4 text-center text-gray-500 border-t",children:["Showing first 20 of ",k.length," quizzes"]})]}),B&&e.jsxs(ge.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(se,{className:"text-green-500"})," Upload Access Codes"]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Uploading codes for: ",e.jsx("strong",{children:k.find(s=>s.id===B)?.title}),e.jsx("br",{}),"Paste codes below (one per line or separated by spaces)"]}),e.jsx("textarea",{value:I,onChange:s=>G(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 mb-4",rows:"6",placeholder:"CODE1 CODE2 CODE3..."}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{H(null),G("")},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:ve,disabled:!I.trim()||o.backup,className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-md flex items-center gap-2 disabled:opacity-50",children:o.backup?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-4 w-4 mr-2",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(se,{})," Upload Codes"]})})]})]})]}),r==="logs"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(Y,{className:"text-purple-500"}),"Activity Logs (",m.length," recent activities)"]}),e.jsxs("button",{onClick:V,className:"flex items-center gap-2 px-3 py-2 bg-blue-100 text-blue-800 rounded-lg hover:bg-blue-200 text-sm",children:[e.jsx(X,{size:16}),"Refresh Logs"]})]}),o.logs?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-500"})}):m.length>0?e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:m.map(s=>e.jsx("div",{className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-lg",children:s.icon}),e.jsx("span",{className:"font-medium text-gray-900",children:s.action}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${s.severity==="info"?"bg-blue-100 text-blue-800":s.severity==="warning"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:s.severity})]}),e.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:[e.jsx("strong",{children:s.user.name})," (",s.user.regNumber,") - ",s.user.department]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Quiz: ",e.jsx("strong",{children:s.quiz.title})," (",s.quiz.department,")"]}),s.details&&e.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["Score: ",s.details.score,"/",s.details.total," (",s.details.percentage,"%) • Time: ",Math.round((s.details.timeSpent||0)/60)," mins"]})]}),e.jsx("div",{className:"text-xs text-gray-500 ml-4",children:s.timestamp.toLocaleString()})]})},s.id))}):e.jsxs("div",{className:"text-center text-gray-500 py-8",children:[e.jsx(Y,{className:"mx-auto text-4xl mb-4 opacity-50"}),e.jsx("p",{children:"No activity logs found"})]})]})}),r==="departments"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-6 flex items-center gap-2",children:[e.jsx(Z,{className:"text-indigo-500"}),"Department Analytics"]}),o.departments?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-500"})}):x.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:x.map(s=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:s.name}),e.jsxs("span",{className:`text-xs px-2 py-1 rounded-full ${s.healthScore>=80?"bg-green-100 text-green-800":s.healthScore>=60?"bg-blue-100 text-blue-800":s.healthScore>=40?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[Math.round(s.healthScore),"% Health"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Users"}),e.jsx("span",{className:"font-semibold",children:s.users.total})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Students"}),e.jsx("span",{className:"font-semibold text-blue-600",children:s.users.students})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Admins"}),e.jsx("span",{className:"font-semibold text-green-600",children:s.users.admins})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Quizzes"}),e.jsx("span",{className:"font-semibold",children:s.quizzes.total})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Submissions"}),e.jsx("span",{className:"font-semibold text-purple-600",children:s.submissions.total})]}),s.submissions.averageScore>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Avg Score"}),e.jsxs("span",{className:"font-semibold text-orange-600",children:[Math.round(s.submissions.averageScore),"%"]})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${s.healthScore>=80?"bg-green-500":s.healthScore>=60?"bg-blue-500":s.healthScore>=40?"bg-yellow-500":"bg-red-500"}`,style:{width:`${s.healthScore}%`}})}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Department Health Score"})]})]},s.name))}):e.jsxs("div",{className:"text-center text-gray-500 py-8",children:[e.jsx(Z,{className:"mx-auto text-4xl mb-4 opacity-50"}),e.jsx("p",{children:"No department data available"})]})]})}),r==="maintenance"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-6 flex items-center gap-2",children:[e.jsx(me,{className:"text-red-500"}),"System Maintenance & Backup"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(he,{className:"text-blue-500"}),"System Backup"]}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Create a complete backup of all platform data including users, quizzes, submissions, and access codes."}),e.jsx("button",{onClick:be,disabled:o.backup,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:o.backup?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Creating Backup..."]}):e.jsxs(e.Fragment,{children:[e.jsx(he,{})," Create & Download Backup"]})})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(Qe,{className:"text-green-500"}),"System Status"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Database"}),e.jsxs("span",{className:"flex items-center gap-2 text-green-600",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Online"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Authentication"}),e.jsxs("span",{className:"flex items-center gap-2 text-green-600",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Active"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Real-time Updates"}),e.jsxs("span",{className:`flex items-center gap-2 ${j?"text-green-600":"text-gray-500"}`,children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${j?"bg-green-500 animate-pulse":"bg-gray-400"}`}),j?"Enabled":"Disabled"]})]})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(ce,{className:"text-purple-500"}),"Platform Metrics"]}),t&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Data Generation"}),e.jsx("span",{className:"text-sm text-gray-500",children:t.generatedAt.toLocaleTimeString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Health Score"}),e.jsxs("span",{className:`font-semibold ${t.health.status.color==="green"?"text-green-600":t.health.status.color==="blue"?"text-blue-600":t.health.status.color==="yellow"?"text-yellow-600":t.health.status.color==="orange"?"text-orange-600":"text-red-600"}`,children:[t.health.score,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Active Period"}),e.jsx("span",{className:"text-sm text-gray-500",children:t.timeFrame.replace(/_/g," ").replace(/\b\w/g,s=>s.toUpperCase())})]})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(_e,{className:"text-yellow-500"}),"Quick Actions"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:le,className:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded text-sm",children:[e.jsx(X,{size:16}),"Refresh All Data"]}),e.jsxs("button",{onClick:()=>P(!j),className:`w-full flex items-center justify-center gap-2 px-3 py-2 rounded text-sm ${j?"bg-red-100 hover:bg-red-200 text-red-700":"bg-green-100 hover:bg-green-200 text-green-700"}`,children:[e.jsx(Me,{size:16}),j?"Disable":"Enable"," Real-time"]}),e.jsxs("button",{onClick:()=>q("/leaderboard"),className:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-blue-100 hover:bg-blue-200 text-blue-700 rounded text-sm",children:[e.jsx(ee,{size:16}),"View Leaderboard"]})]})]})]})]})})]})]})}export{rs as default};
