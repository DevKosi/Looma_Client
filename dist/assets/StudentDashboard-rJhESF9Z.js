import{r as a,u as je,j as e}from"./index-Cd8QKmag.js";import{a as R,d as G,b as w,g as Y,q as V,h as Q,w as I,i as L,u as fe,j as ye}from"./firebaseConfig-DFE2fxb7.js";import{c as Ne,g as ve}from"./leaderboardService-ZITUD-EC.js";import{i as g,j as we,k as u,h as z,g as k,l as ze,m as ke,a as Se,n as Z,c as H,o as X,p as J,q as K}from"./index-DquAZtMJ.js";import{A as W}from"./index-PX28b7nN.js";import{m as E}from"./proxy-DIjvbQ3r.js";function Te(){const[r,ee]=a.useState(null),[se,te]=a.useState([]),[S,ae]=a.useState([]),[c,re]=a.useState(null),[l,le]=a.useState(null),[D,y]=a.useState({user:!0,quizzes:!0,results:!1,position:!1}),[N,ie]=a.useState(""),[q,ne]=a.useState(null),[de,A]=a.useState(!1),[U,_]=a.useState(""),[v,ce]=a.useState(null),[i,p]=a.useState("quizzes"),[m,O]=a.useState("all"),[oe,xe]=a.useState([]),[T,F]=a.useState(!1),[$,b]=a.useState(null),[d,j]=a.useState(null),h=je();a.useEffect(()=>{(async()=>{try{const t=R.currentUser;if(!t){h("/login");return}const o=G(w,"users",t.uid),n=await Y(o);if(!n.exists()){h("/login");return}const x=n.data();ee(x);const M=V(Q(w,"quizzes"),I("status","==","approved")),f=(await L(M)).docs.map(C=>({id:C.id,...C.data()}));te(f);const be=[...new Set(f.map(C=>C.department))];xe(be)}catch(t){console.error("Error fetching data:",t),ne({type:"error",message:"Failed to load quizzes. Please try again."})}finally{y(t=>({...t,user:!1,quizzes:!1}))}})()},[h]);const me=async()=>{if(r?.uid){y(s=>({...s,results:!0}));try{const s=[],t=await L(Q(w,"quizzes"));for(const n of t.docs){const x=V(Q(w,"quizzes",n.id,"submissions"),I("userId","==",r.uid));(await L(x)).docs.forEach(P=>{const f=P.data();s.push({id:P.id,quizId:n.id,quizTitle:n.data().title,quizDepartment:n.data().department,...f,submittedAt:f.submittedAt?.toDate?.()||new Date(f.submittedAt)})})}s.sort((n,x)=>x.submittedAt-n.submittedAt),ae(s);const o=Ne(s);re(o)}catch(s){console.error("Error fetching user results:",s)}finally{y(s=>({...s,results:!1}))}}},ge=async()=>{if(!(!r?.uid||!r?.department)){y(s=>({...s,position:!0}));try{const s=await ve(r.uid,r.department);le(s)}catch(s){console.error("Error fetching user position:",s)}finally{y(s=>({...s,position:!1}))}}};a.useEffect(()=>{r&&(i==="results"||i==="leaderboard")&&(i==="results"&&S.length===0&&me(),i==="leaderboard"&&!l&&ge())},[r,i]);const B=se.filter(s=>{const t=s.title.toLowerCase().includes(N.toLowerCase())||s.description.toLowerCase().includes(N.toLowerCase()),o=m==="all"||s.department===m;return t&&o}),ue=s=>{ce(s),_(""),b(null),j(null),A(!0)},he=async()=>{const s=U.trim();console.log("[DEBUG] Verifying access code:",s);try{if(!v?.id)throw new Error("NO_QUIZ_SELECTED");if(!s)throw new Error("EMPTY_CODE");const t=G(w,"quizzes",v.id,"codes",s),o=await Y(t);if(!o.exists())throw new Error("CODE_NOT_FOUND");const n=o.data();if(console.log("[DEBUG] Code data:",n),console.log("[DEBUG] Current user object:",r),n.used)throw new Error("CODE_ALREADY_USED");const x=R.currentUser;if(!x||!x.uid)throw new Error("USER_NOT_READY");await fe(t,{used:!0,usedBy:x.uid,usedAt:ye()}),console.log("[DEBUG] Code verified and marked as used â€” navigating to quiz"),j("success"),b("Code verified successfully! Redirecting..."),setTimeout(()=>{h(`/quiz/${v.id}?code=${s}`)},1e3)}catch(t){console.error("[DEBUG] Verification failed:",t.message),b({NO_QUIZ_SELECTED:"No quiz selected",EMPTY_CODE:"Please enter an access code",CODE_NOT_FOUND:"Invalid access code",CODE_ALREADY_USED:"This code has already been used",USER_NOT_READY:"User not authenticated. Please reload the page.","permission-denied":"Authentication error"}[t.message]||"Failed to verify code"),j("error")}},pe=async()=>{await R.signOut(),h("/login")};return D.user?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 relative",children:[e.jsx("header",{className:"bg-white shadow-soft sticky top-0 z-10",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-full",children:e.jsx(g,{className:"text-blue-600",size:20})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-bold text-gray-800",children:"Student Dashboard"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[r?.department," â€¢ ",r?.regNumber]})]})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("button",{onClick:pe,className:"flex items-center gap-2 text-red-600 hover:text-red-700 text-sm font-medium px-3 py-2 rounded-md hover:bg-red-50 transition-colors",children:[e.jsx(we,{})," Sign Out"]})})]})}),e.jsx("nav",{className:"bg-white shadow-soft",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"flex overflow-x-auto scrollbar-hide",children:e.jsxs("div",{className:"flex space-x-0 min-w-full",children:[e.jsxs("button",{onClick:()=>p("quizzes"),className:`px-4 py-3 font-medium text-sm flex items-center gap-2 whitespace-nowrap flex-shrink-0 ${i==="quizzes"?"text-primary-600 border-b-2 border-primary-600":"text-gray-500 hover:text-gray-700"}`,children:[e.jsx(g,{size:16})," Available Quizzes"]}),e.jsxs("button",{onClick:()=>p("results"),className:`px-4 py-3 font-medium text-sm flex items-center gap-2 whitespace-nowrap flex-shrink-0 ${i==="results"?"text-primary-600 border-b-2 border-primary-600":"text-gray-500 hover:text-gray-700"}`,children:[e.jsx(u,{size:16})," My Results"]}),e.jsxs("button",{onClick:()=>p("leaderboard"),className:`px-4 py-3 font-medium text-sm flex items-center gap-2 whitespace-nowrap flex-shrink-0 ${i==="leaderboard"?"text-primary-600 border-b-2 border-primary-600":"text-gray-500 hover:text-gray-700"}`,children:[e.jsx(z,{size:16})," Leaderboard"]}),e.jsxs("button",{onClick:()=>p("profile"),className:`px-4 py-3 font-medium text-sm flex items-center gap-2 whitespace-nowrap flex-shrink-0 ${i==="profile"?"text-primary-600 border-b-2 border-primary-600":"text-gray-500 hover:text-gray-700"}`,children:[e.jsx(k,{size:16})," My Profile"]})]})})})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsx(W,{children:q&&e.jsx(E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:`p-3 rounded-md mb-6 ${q.type==="error"?"bg-red-50 text-red-700":"bg-green-50 text-green-700"}`,children:q.message})}),i==="quizzes"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(ze,{className:"text-gray-400"})}),e.jsx("input",{type:"text",placeholder:"Search quizzes...",value:N,onChange:s=>ie(s.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>F(!T),className:"flex items-center justify-between gap-2 px-4 py-2 w-full sm:w-64 border border-gray-300 rounded-lg bg-white",children:[e.jsx("span",{children:m==="all"?"All Departments":m}),e.jsx(ke,{className:`transition-transform ${T?"rotate-180":""}`})]}),T&&e.jsxs("div",{className:"absolute z-10 mt-1 w-full sm:w-64 bg-white border border-gray-300 rounded-lg shadow-lg",children:[e.jsx("button",{onClick:()=>{O("all"),F(!1)},className:`block w-full text-left px-4 py-2 hover:bg-gray-100 ${m==="all"?"bg-blue-50 text-blue-600":""}`,children:"All Departments"}),oe.map(s=>e.jsx("button",{onClick:()=>{O(s),F(!1)},className:`block w-full text-left px-4 py-2 hover:bg-gray-100 ${m===s?"bg-blue-50 text-blue-600":""}`,children:s},s))]})]})]}),D.quizzes?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((s,t)=>e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 h-48 animate-pulse"},t))}):B.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-8 text-center",children:[e.jsx(g,{className:"mx-auto text-gray-400",size:48}),e.jsx("h3",{className:"text-lg font-medium text-gray-700 mt-4",children:N||m!=="all"?"No matching quizzes found":"No quizzes available yet"}),e.jsx("p",{className:"text-gray-500 mt-1",children:N||m!=="all"?"Try adjusting your search or filter":"Check back later for new quizzes"})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:B.map(s=>e.jsx(E.div,{whileHover:{y:-5},className:"bg-white rounded-lg shadow-sm overflow-hidden border border-gray-200 hover:border-blue-200 transition-all",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("span",{className:"text-xs font-medium px-2 py-1 bg-green-100 text-green-800 rounded-full flex items-center gap-1",children:[e.jsx(Se,{size:12})," Approved"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs px-2 py-1 bg-blue-100 text-blue-800 rounded-full",children:s.department}),e.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-1",children:[e.jsx(Z,{size:12})," ",s.timeLimit," min"]})]})]}),e.jsx("h3",{className:"font-bold text-gray-800 mb-2 line-clamp-2",children:s.title}),e.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-3",children:s.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:[s.questions?.length||0," questions"]}),e.jsxs("button",{onClick:()=>ue(s),className:"text-sm font-medium text-blue-600 hover:text-blue-700 flex items-center gap-1",children:[e.jsx(H,{size:14})," Take Quiz"]})]})]})},s.id))})]}),i==="results"&&e.jsxs("div",{className:"space-y-6",children:[c&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border-l-4 border-blue-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Quizzes"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:c.totalQuizzes})]}),e.jsx(g,{className:"text-blue-500",size:24})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border-l-4 border-green-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Average Score"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[c.averagePercentage,"%"]})]}),e.jsx(u,{className:"text-green-500",size:24})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border-l-4 border-yellow-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Best Score"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:c.highestScore})]}),e.jsx(z,{className:"text-yellow-500",size:24})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border-l-4 border-purple-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Current Streak"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:c.recentStreak})]}),e.jsx(X,{className:"text-purple-500",size:24})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(u,{className:"text-blue-500"}),"Quiz Results (",S.length,")"]})}),D.results?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading your results..."})]}):S.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(u,{className:"mx-auto text-4xl text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"No Quiz Results Yet"}),e.jsx("p",{className:"text-gray-500",children:"Take your first quiz to see your results here!"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quiz"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Score"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Percentage"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Performance"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S.map((s,t)=>e.jsxs("tr",{className:t%2===0?"bg-white":"bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.quizTitle}),e.jsx("div",{className:"text-sm text-gray-500",children:s.quizDepartment})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[s.score,"/",s.total]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-1 max-w-20",children:e.jsx("div",{className:`h-2 rounded-full mr-2 ${(s.percentage||0)>=70?"bg-green-200":(s.percentage||0)>=50?"bg-yellow-200":"bg-red-200"}`,children:e.jsx("div",{className:`h-2 rounded-full ${(s.percentage||0)>=70?"bg-green-500":(s.percentage||0)>=50?"bg-yellow-500":"bg-red-500"}`,style:{width:`${Math.min(s.percentage||0,100)}%`}})})}),e.jsxs("span",{className:"text-sm font-medium text-gray-900 ml-2",children:[s.percentage||0,"%"]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.submittedAt.toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${(s.percentage||0)>=90?"bg-green-100 text-green-800":(s.percentage||0)>=80?"bg-blue-100 text-blue-800":(s.percentage||0)>=70?"bg-yellow-100 text-yellow-800":(s.percentage||0)>=50?"bg-orange-100 text-orange-800":"bg-red-100 text-red-800"}`,children:(s.percentage||0)>=90?"Excellent":(s.percentage||0)>=80?"Very Good":(s.percentage||0)>=70?"Good":(s.percentage||0)>=50?"Fair":"Needs Improvement"})})]},s.id))})]})})]})]}),i==="leaderboard"&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-800 flex items-center gap-2",children:[e.jsx(z,{className:"text-yellow-500"}),"Leaderboard Preview"]}),e.jsx("p",{className:"text-gray-500 text-sm",children:"See how you rank against your peers"})]}),e.jsx("button",{onClick:()=>h("/leaderboard"),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:"View Full Leaderboard"})]}),D.position?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-300 rounded mb-2"}),e.jsx("div",{className:"h-8 bg-gray-300 rounded mb-2"}),e.jsx("div",{className:"h-3 bg-gray-300 rounded"})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-300 rounded mb-2"}),e.jsx("div",{className:"h-8 bg-gray-300 rounded mb-2"}),e.jsx("div",{className:"h-3 bg-gray-300 rounded"})]})]}):l?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-gradient-to-r from-yellow-50 to-orange-50 rounded-lg border border-yellow-200",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Department Ranking"}),e.jsxs("p",{className:"text-2xl font-bold text-yellow-600",children:["#",l.department.rank||"Unranked"," of ",l.department.totalParticipants||0]}),e.jsx("p",{className:"text-sm text-gray-600",children:l.department.rank?"Your current position":"Take quizzes to get ranked"}),l.department.stats&&e.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Avg: ",l.department.stats.averagePercentage,"% â€¢ Quizzes: ",l.department.stats.totalQuizzes]})]}),e.jsxs("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg border border-blue-200",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Global Ranking"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["#",l.global.rank||"Unranked"," of ",l.global.totalParticipants||0]}),e.jsx("p",{className:"text-sm text-gray-600",children:l.global.rank?"Compete with all students":"Take quizzes to get ranked"}),l.global.stats&&e.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Avg: ",l.global.stats.averagePercentage,"% â€¢ Points: ",l.global.stats.totalPoints]})]})]}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-gradient-to-r from-yellow-50 to-orange-50 dark:from-yellow-900/20 dark:to-orange-900/20 rounded-lg border border-yellow-200 dark:border-yellow-700",children:[e.jsx("h4",{className:"font-semibold text-gray-800 dark:text-gray-200 mb-2",children:"Department Ranking"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:l?.department?.hasData?"Loading...":"No Data"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:l?.department?.hasData?"Calculating your position...":"Take quizzes to see your position"})]}),e.jsxs("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 rounded-lg border border-blue-200 dark:border-blue-700",children:[e.jsx("h4",{className:"font-semibold text-gray-800 dark:text-gray-200 mb-2",children:"Global Ranking"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:l?.global?.hasData?"Loading...":"No Data"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:l?.global?.hasData?"Calculating your position...":"Take quizzes to see your position"})]})]}),e.jsx("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:e.jsx("p",{className:"text-center text-gray-600",children:"ðŸ† Take more quizzes to improve your ranking and compete for the top spot!"})})]}),i==="profile"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg shadow-sm overflow-hidden",children:e.jsx("div",{className:"px-6 py-8 text-white",children:e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsx("div",{className:"w-20 h-20 bg-white bg-opacity-20 rounded-full flex items-center justify-center",children:e.jsx(k,{className:"w-10 h-10 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:r?.fullName||"Student"}),e.jsx("p",{className:"text-blue-100 mt-1",children:r?.regNumber}),e.jsxs("p",{className:"text-blue-200 text-sm",children:[r?.department," Department"]})]})]})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(k,{className:"text-blue-500"}),"Personal Information"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Full Name"}),e.jsx("p",{className:"text-gray-900 font-semibold",children:r?.fullName||"Not provided"})]}),e.jsx(k,{className:"text-gray-400"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Registration Number"}),e.jsx("p",{className:"text-gray-900 font-semibold",children:r?.regNumber||"Not provided"})]}),e.jsx(g,{className:"text-gray-400"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Department"}),e.jsx("p",{className:"text-gray-900 font-semibold",children:r?.department||"Not provided"})]}),e.jsx(g,{className:"text-gray-400"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Email Address"}),e.jsx("p",{className:"text-gray-900 font-semibold",children:r?.email||"Not provided"})]}),e.jsx(k,{className:"text-gray-400"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(u,{className:"text-green-500"}),"Academic Summary"]}),c?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-green-600",children:"Quizzes Completed"}),e.jsx("p",{className:"text-green-900 font-bold text-xl",children:c.totalQuizzes})]}),e.jsx(g,{className:"text-green-500 w-6 h-6"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-blue-600",children:"Average Score"}),e.jsxs("p",{className:"text-blue-900 font-bold text-xl",children:[c.averagePercentage,"%"]})]}),e.jsx(u,{className:"text-blue-500 w-6 h-6"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-yellow-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-yellow-600",children:"Best Performance"}),e.jsx("p",{className:"text-yellow-900 font-bold text-xl",children:c.highestScore})]}),e.jsx(z,{className:"text-yellow-500 w-6 h-6"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-purple-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-purple-600",children:"Current Streak"}),e.jsx("p",{className:"text-purple-900 font-bold text-xl",children:c.recentStreak})]}),e.jsx(X,{className:"text-purple-500 w-6 h-6"})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(u,{className:"mx-auto text-4xl text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Take your first quiz to see your academic summary!"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(Z,{className:"text-indigo-500"}),"Quick Actions"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("button",{onClick:()=>p("quizzes"),className:"p-4 border border-gray-200 rounded-lg hover:bg-blue-50 hover:border-blue-300 transition-colors text-left",children:[e.jsx(g,{className:"text-blue-500 w-6 h-6 mb-2"}),e.jsx("h4",{className:"font-semibold text-gray-800",children:"Browse Quizzes"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Find and take available quizzes"})]}),e.jsxs("button",{onClick:()=>p("results"),className:"p-4 border border-gray-200 rounded-lg hover:bg-green-50 hover:border-green-300 transition-colors text-left",children:[e.jsx(u,{className:"text-green-500 w-6 h-6 mb-2"}),e.jsx("h4",{className:"font-semibold text-gray-800",children:"View Results"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Check your quiz performance"})]}),e.jsxs("button",{onClick:()=>h("/leaderboard"),className:"p-4 border border-gray-200 rounded-lg hover:bg-yellow-50 hover:border-yellow-300 transition-colors text-left",children:[e.jsx(z,{className:"text-yellow-500 w-6 h-6 mb-2"}),e.jsx("h4",{className:"font-semibold text-gray-800",children:"Leaderboard"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"See how you rank globally"})]})]})]})]})]}),e.jsx(W,{children:de&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50",children:e.jsx(E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Enter Access Code"}),e.jsx("button",{onClick:()=>{A(!1),b(null),j(null)},className:"text-gray-500 hover:text-gray-700",disabled:d==="success",children:e.jsx(J,{size:24})})]}),$&&e.jsxs(E.div,{initial:{opacity:0},animate:{opacity:1},className:`mb-4 p-3 rounded-md text-sm flex items-center gap-2 ${d==="success"?"bg-green-50 text-green-600":"bg-red-50 text-red-600"}`,children:[d==="success"?e.jsx(K,{}):e.jsx(J,{}),$]}),e.jsxs("p",{className:"text-gray-600 mb-2",children:["You need an access code to take ",e.jsxs("span",{className:"font-medium",children:['"',v?.title,'"']})]}),e.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["Department: ",v?.department]}),e.jsx("input",{type:"text",value:U,onChange:s=>{_(s.target.value),b(null),j(null)},placeholder:"Enter your access code",className:`w-full px-4 py-2 border rounded-lg mb-4 focus:ring-2 focus:ring-blue-500 focus:border-transparent ${d==="success"?"border-green-300 bg-green-50":d==="error"?"border-red-300 bg-red-50":"border-gray-300"}`,autoFocus:!0,disabled:d==="success"}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{A(!1),b(null),j(null)},className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",disabled:d==="success",children:"Cancel"}),e.jsx("button",{onClick:he,disabled:!U.trim()||d==="success",className:`px-4 py-2 rounded-lg text-white flex items-center gap-1 ${d==="success"?"bg-green-500":d==="error"?"bg-red-500":"bg-blue-600 hover:bg-blue-700"}`,children:d==="success"?e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"animate-pulse"})," Verified"]}):e.jsxs(e.Fragment,{children:[e.jsx(H,{})," Verify Code"]})})]})]})})})})]})}export{Te as default};
