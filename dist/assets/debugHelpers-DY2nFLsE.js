import{h as a,b as l,i,a as u,g as S,d}from"./firebaseConfig-DFE2fxb7.js";const g=async()=>{try{const e=u.currentUser;if(!e)return console.log("âŒ NO USER AUTHENTICATED"),null;console.log("ðŸ” DEBUGGING USER DATA:"),console.log("Auth User:",{uid:e.uid,email:e.email,displayName:e.displayName});const o=await S(d(l,"users",e.uid));if(o.exists()){const n=o.data();return console.log("âœ… FIRESTORE USER DATA:",n),n}else return console.log("âŒ NO USER DOCUMENT IN FIRESTORE"),null}catch(e){return console.error("âŒ ERROR FETCHING USER DATA:",e),null}},m=async e=>{try{console.log(`ðŸ” DEBUGGING SUBMISSIONS FOR QUIZ: ${e}`);const o=a(l,"quizzes",e,"submissions"),n=await i(o);return console.log(`ðŸ“Š FOUND ${n.size} SUBMISSIONS:`),n.docs.forEach((t,c)=>{const s=t.data();console.log(`Submission ${c+1}:`,{id:t.id,regNumber:s.regNumber,percentage:s.percentage,email:s.email,timeSpent:s.timeSpent,submittedAt:s.submittedAt})}),n.docs.map(t=>({id:t.id,...t.data()}))}catch(o){return console.error("âŒ ERROR FETCHING SUBMISSIONS:",o),[]}},p=e=>{console.log("ðŸ” VALIDATING SUBMISSION DATA:");const o={regNumber:e.regNumber!=="Anonymous"&&e.regNumber,email:e.email!=="No email provided"&&e.email,percentage:typeof e.percentage=="number"&&e.percentage>=0,timeSpent:typeof e.timeSpent=="number"&&e.timeSpent>=0,score:typeof e.score=="number"&&e.score>=0,total:typeof e.total=="number"&&e.total>0};Object.entries(o).forEach(([t,c])=>{console.log(`${c?"âœ…":"âŒ"} ${t}:`,e[t])});const n=Object.values(o).every(Boolean);return console.log(`${n?"âœ…":"âŒ"} OVERALL VALIDATION:`,n?"PASSED":"FAILED"),{isValid:n,checks:o,data:e}},A=(e,o,n,t)=>{console.log("ðŸ” TESTING CALCULATIONS:");const c=o>0?Math.round(e/o*100):0,s=Math.max(0,n*60-(t||0)),r=Math.round(s/60);return console.log("ðŸ“Š CALCULATION RESULTS:"),console.log(`Score: ${e}/${o}`),console.log(`Percentage: ${c}%`),console.log(`Time Spent: ${s}s (${r}m)`),console.log(`Time Limit: ${n} minutes`),console.log(`Time Left: ${t} seconds`),{score:e,total:o,percentage:c,timeSpent:s,timeSpentMinutes:r}};typeof window<"u"&&(window.debugLooma={checkUser:g,checkSubmissions:m,validateData:p,testCalc:A},console.log("ðŸ› ï¸ LOOMA DEBUG TOOLS LOADED!"),console.log("Use: window.debugLooma.checkUser() to debug user data"),console.log("Use: window.debugLooma.checkSubmissions('quizId') to debug submissions"));export{m as d,A as t,p as v};
